<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verdant License Manager â€¢ Premium Admin</title>
    
    <!-- Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link href="style.css" rel="stylesheet">
</head>
<body class="bg-dark">
    <!-- Navigation -->
    <nav class="navbar navbar-dark navbar-expand-lg bg-dark border-bottom border-secondary">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <div class="logo-gradient me-2">
                    <i class="bi bi-shield-lock-fill fs-3"></i>
                </div>
                <span class="fw-bold">Verdant</span>
                <span class="badge bg-warning text-dark ms-2">v3.0</span>
            </a>
            
            <div class="navbar-nav ms-auto">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                        <div class="avatar-sm bg-primary rounded-circle d-flex align-items-center justify-content-center me-2">
                            <i class="bi bi-person-fill text-white"></i>
                        </div>
                        <span id="navbar-username">Admin</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="/api/logout"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-2 col-md-3 sidebar bg-dark border-end border-secondary">
                <div class="d-flex flex-column flex-shrink-0 p-3">
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" data-tab="dashboard">
                                <i class="bi bi-speedometer2 me-2"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-tab="generate">
                                <i class="bi bi-plus-circle me-2"></i>
                                Generate Keys
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-tab="manage">
                                <i class="bi bi-key me-2"></i>
                                Manage Keys
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-tab="analytics">
                                <i class="bi bi-graph-up me-2"></i>
                                Analytics
                            </a>
                        </li>
                    </ul>
                    
                    <!-- System Status -->
                    <div class="mt-auto">
                        <div class="card bg-dark border-secondary">
                            <div class="card-body p-3">
                                <small class="text-muted d-block">System Status</small>
                                <div class="d-flex align-items-center mt-1">
                                    <div class="status-indicator online me-2"></div>
                                    <small class="text-success">All Systems Operational</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-10 col-md-9 main-content">
                <!-- Dashboard Tab -->
                <div class="tab-pane active" id="dashboard-tab">
                    <!-- Stats Cards -->
                    <div class="row g-4 mb-4">
                        <div class="col-xl-3 col-md-6">
                            <div class="card stats-card bg-gradient-primary">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="card-title text-white-50">Total Keys</h6>
                                            <h2 class="text-white mb-0" id="stats-total">0</h2>
                                        </div>
                                        <div class="icon-circle bg-white-20">
                                            <i class="bi bi-key text-white"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <small class="text-white-50">
                                            <i class="bi bi-arrow-up-short text-success"></i>
                                            <span id="stats-total-change">0</span> this month
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xl-3 col-md-6">
                            <div class="card stats-card bg-gradient-success">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="card-title text-white-50">Active Users</h6>
                                            <h2 class="text-white mb-0" id="stats-active">0</h2>
                                        </div>
                                        <div class="icon-circle bg-white-20">
                                            <i class="bi bi-people text-white"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <small class="text-white-50">
                                            <i class="bi bi-activity text-warning"></i>
                                            <span id="stats-active-change">0</span> online
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xl-3 col-md-6">
                            <div class="card stats-card bg-gradient-warning">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="card-title text-white-50">Revenue</h6>
                                            <h2 class="text-white mb-0" id="stats-revenue">$0</h2>
                                        </div>
                                        <div class="icon-circle bg-white-20">
                                            <i class="bi bi-currency-dollar text-white"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <small class="text-white-50">
                                            <i class="bi bi-graph-up-arrow text-success"></i>
                                            <span id="stats-revenue-change">0%</span> growth
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-xl-3 col-md-6">
                            <div class="card stats-card bg-gradient-info">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="card-title text-white-50">Expired</h6>
                                            <h2 class="text-white mb-0" id="stats-expired">0</h2>
                                        </div>
                                        <div class="icon-circle bg-white-20">
                                            <i class="bi bi-clock-history text-white"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <small class="text-white-50">
                                            <i class="bi bi-exclamation-triangle text-warning"></i>
                                            Needs attention
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div class="row g-4 mb-4">
                        <div class="col-lg-8">
                            <div class="card bg-dark border-secondary">
                                <div class="card-header border-secondary">
                                    <h5 class="card-title mb-0">License Usage Analytics</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="usageChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4">
                            <div class="card bg-dark border-secondary">
                                <div class="card-header border-secondary">
                                    <h5 class="card-title mb-0">Device Distribution</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="deviceChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity & Quick Actions -->
                    <div class="row g-4">
                        <div class="col-lg-6">
                            <div class="card bg-dark border-secondary">
                                <div class="card-header border-secondary d-flex justify-content-between align-items-center">
                                    <h5 class="card-title mb-0">Recent Activity</h5>
                                    <button class="btn btn-sm btn-outline-secondary">View All</button>
                                </div>
                                <div class="card-body">
                                    <div class="activity-timeline" id="recent-activity">
                                        <div class="activity-item">
                                            <div class="d-flex justify-content-between">
                                                <strong class="text-light">SYSTEM_STARTED</strong>
                                                <small class="text-muted">Just now</small>
                                            </div>
                                            <p class="text-muted mb-0 small">License manager system initialized</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-6">
                            <div class="card bg-dark border-secondary">
                                <div class="card-header border-secondary">
                                    <h5 class="card-title mb-0">Quick Actions</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-6">
                                            <button class="btn btn-outline-primary w-100 h-100 p-3 action-card" onclick="showGenerateModal()">
                                                <i class="bi bi-plus-circle fs-2 d-block mb-2"></i>
                                                Generate Key
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button class="btn btn-outline-success w-100 h-100 p-3 action-card" onclick="exportData()">
                                                <i class="bi bi-download fs-2 d-block mb-2"></i>
                                                Export Data
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button class="btn btn-outline-warning w-100 h-100 p-3 action-card" onclick="showBulkModal()">
                                                <i class="bi bi-collection fs-2 d-block mb-2"></i>
                                                Bulk Generate
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button class="btn btn-outline-info w-100 h-100 p-3 action-card" onclick="showAnalytics()">
                                                <i class="bi bi-graph-up fs-2 d-block mb-2"></i>
                                                View Reports
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Generate Keys Tab -->
                <div class="tab-pane" id="generate-tab" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h4 class="fw-bold">Generate License Keys</h4>
                        <button class="btn btn-primary" onclick="showGenerateModal()">
                            <i class="bi bi-plus-circle me-2"></i>Advanced Generator
                        </button>
                    </div>
                    
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="card bg-dark border-secondary">
                                <div class="card-header border-secondary">
                                    <h5 class="card-title mb-0">Quick Generation</h5>
                                </div>
                                <div class="card-body">
                                    <form id="quickGenerateForm">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Username</label>
                                                <input type="text" class="form-control" id="gen-username" placeholder="Enter username" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Max Devices</label>
                                                <input type="number" class="form-control" id="gen-max-devices" value="1" min="1" max="99999" required>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Duration</label>
                                                <input type="number" class="form-control" id="gen-duration" value="30" min="1" required>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Unit</label>
                                                <select class="form-select" id="gen-unit">
                                                    <option value="hours">Hours</option>
                                                    <option value="days" selected>Days</option>
                                                    <option value="weeks">Weeks</option>
                                                    <option value="months">Months</option>
                                                    <option value="years">Years</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Created By</label>
                                                <input type="text" class="form-control" id="gen-created-by" value="admin" readonly>
                                            </div>
                                            <div class="col-12">
                                                <button type="submit" class="btn btn-primary w-100">
                                                    <i class="bi bi-key me-2"></i>Generate License Key
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4">
                            <div class="card bg-dark border-secondary">
                                <div class="card-header border-secondary">
                                    <h5 class="card-title mb-0">Recently Generated</h5>
                                </div>
                                <div class="card-body">
                                    <div id="recent-generated">
                                        <div class="text-center text-muted py-4">
                                            <i class="bi bi-key fs-1 d-block mb-2"></i>
                                            <small>No keys generated yet</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card bg-dark border-secondary mt-4">
                                <div class="card-header border-secondary">
                                    <h5 class="card-title mb-0">Generation Stats</h5>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Today</span>
                                        <span class="text-warning" id="stats-today">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>This Week</span>
                                        <span class="text-warning" id="stats-week">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>This Month</span>
                                        <span class="text-warning" id="stats-month">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Manage Keys Tab -->
                <div class="tab-pane" id="manage-tab" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h4 class="fw-bold">Manage License Keys</h4>
                        <div>
                            <button class="btn btn-outline-secondary me-2" onclick="refreshKeys()">
                                <i class="bi bi-arrow-clockwise me-2"></i>Refresh
                            </button>
                            <button class="btn btn-primary" onclick="showGenerateModal()">
                                <i class="bi bi-plus-circle me-2"></i>New Key
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filters -->
                    <div class="card bg-dark border-secondary mb-4">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label class="form-label">Status</label>
                                    <select class="form-select" id="filter-status">
                                        <option value="all">All Status</option>
                                        <option value="active">Active</option>
                                        <option value="expired">Expired</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Devices</label>
                                    <select class="form-select" id="filter-devices">
                                        <option value="all">All Devices</option>
                                        <option value="used">Used</option>
                                        <option value="unused">Unused</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Date Range</label>
                                    <input type="date" class="form-control" id="filter-date">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Search</label>
                                    <input type="text" class="form-control" id="filter-search" placeholder="Search keys or users...">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Keys Table -->
                    <div class="card bg-dark border-secondary">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover" id="keys-table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <input class="form-check-input" type="checkbox" id="select-all">
                                            </th>
                                            <th>Username</th>
                                            <th>License Key</th>
                                            <th>Created</th>
                                            <th>Expires</th>
                                            <th>Devices</th>
                                            <th>Status</th>
                                            <th>Logins</th>
                                            <th>Last Used</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="keys-tbody">
                                        <!-- Keys will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Bulk Actions -->
                            <div class="mt-3" id="bulk-actions" style="display: none;">
                                <div class="d-flex align-items-center">
                                    <span class="me-3" id="selected-count">0 keys selected</span>
                                    <button class="btn btn-sm btn-outline-danger me-2" onclick="bulkRevoke()">
                                        <i class="bi bi-ban me-1"></i>Revoke
                                    </button>
                                    <button class="btn btn-sm btn-outline-warning me-2" onclick="bulkExtend()">
                                        <i class="bi bi-calendar-plus me-1"></i>Extend
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary" onclick="clearSelection()">
                                        Clear Selection
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Loading -->
                            <div class="text-center py-5" id="keys-loading">
                                <div class="spinner-border text-warning" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mt-2 text-muted">Loading license keys...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div class="tab-pane" id="analytics-tab" style="display: none;">
                    <h4 class="fw-bold mb-4">Advanced Analytics</h4>
                    <div class="card bg-dark border-secondary">
                        <div class="card-body text-center py-5">
                            <i class="bi bi-graph-up-arrow fs-1 text-muted d-block mb-3"></i>
                            <h5 class="text-muted">Advanced Analytics</h5>
                            <p class="text-muted mb-0">Detailed analytics and reporting features coming soon...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>